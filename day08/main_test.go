package main

import (
	"github.com/stretchr/testify/assert"
	"testing"
)

func TestPart1(t *testing.T) {

	t.Run("Parse", func(t *testing.T) {
		grid := parse(`............
					   ........0...
					   .....0......
					   .......0....
					   ....0.......
					   ......A.....
					   ............
					   ............
					   ........A...
					   .........A..
					   ............
					   ............`)
		assert.Equal(t, [][]string{
			{".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."},
			{".", ".", ".", ".", ".", ".", ".", ".", "0", ".", ".", "."},
			{".", ".", ".", ".", ".", "0", ".", ".", ".", ".", ".", "."},
			{".", ".", ".", ".", ".", ".", ".", "0", ".", ".", ".", "."},
			{".", ".", ".", ".", "0", ".", ".", ".", ".", ".", ".", "."},
			{".", ".", ".", ".", ".", ".", "A", ".", ".", ".", ".", "."},
			{".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."},
			{".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."},
			{".", ".", ".", ".", ".", ".", ".", ".", "A", ".", ".", "."},
			{".", ".", ".", ".", ".", ".", ".", ".", ".", "A", ".", "."},
			{".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."},
			{".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."},
		}, grid)
	})

	t.Run("Antenna", func(t *testing.T) {
		grid := parse(`............
					   ........0...
					   .....0......
					   .......0....
					   ....0.......
					   ......A.....
					   ............
					   ............
					   ........A...
					   .........A..
					   ............
					   ............`)
		assert.Equal(t, map[string][]Cell{
			"0": {{8, 1}, {5, 2}, {7, 3}, {4, 4}},
			"A": {{6, 5}, {8, 8}, {9, 9}},
		}, findAntenna(grid))
	})

	t.Run("Part 1", func(t *testing.T) {
		grid := parse(`............
					   ........0...
					   .....0......
					   .......0....
					   ....0.......
					   ......A.....
					   ............
					   ............
					   ........A...
					   .........A..
					   ............
					   ............`)
		assert.Equal(t, 14, len(antinodes(grid, Span{1, 1})))
	})

}

func TestPart2(t *testing.T) {

	t.Run("Part 2 Simple", func(t *testing.T) {
		grid := parse(`T.........
							...T......
							.T........
							..........
							..........
							..........
							..........
							..........
							..........
							..........`)
		assert.Equal(t, 9, len(antinodes(grid, Span{0, 100})))
	})

	t.Run("Part 2", func(t *testing.T) {
		grid := parse(`............
					   ........0...
					   .....0......
					   .......0....
					   ....0.......
					   ......A.....
					   ............
					   ............
					   ........A...
					   .........A..
					   ............
					   ............`)
		assert.Equal(t, 34, len(antinodes(grid, Span{0, 100})))
	})

}
